package dk.itu.spct.itucontextphonecloud.persistence;

import com.google.appengine.api.datastore.DatastoreService;
import com.google.appengine.api.datastore.DatastoreServiceFactory;
import com.google.appengine.api.datastore.Entity;
import com.google.appengine.api.datastore.Key;
import com.google.appengine.api.datastore.KeyFactory;
import com.google.appengine.api.users.User;
import com.google.appengine.api.users.UserService;
import com.google.appengine.api.users.UserServiceFactory;

import dk.itu.spct.itucontextphonecloud.model.ContextEntity;

public class DB {
	
	public static DB instance;
	
	public static DB getInstance() {
		if(instance == null)
			instance = new DB();
		return instance;
	}
	
	private DatastoreService dataStore;
	
	private DB() {
		dataStore = DatastoreServiceFactory.getDatastoreService();
	}
	
	public void insertEntity(ContextEntity entity) {
		Entity e = new Entity(String.valueOf(entity.getId()));
		e.setProperty("id", entity.getId());
		e.setProperty("sensor", entity.getSensor());
	}
	
	private void insert(Entity entity) {
		dataStore.put(entity);
	}
//	
//	private long id;
//	private String sensor;
//	private String value;
//	private String type;
//	private long timeStamp;
	
//	DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();
//
//
//	Entity employee = new Entity("Employee");
//
//	employee.setProperty("firstName", "Antonio");
//	employee.setProperty("lastName", "Salieri");
//
//	Date hireDate = new Date();
//	employee.setProperty("hireDate", hireDate);
//
//	employee.setProperty("attendedHrTraining", true);
//
//
//	datastore.put(employee);
	
//	public void doPost(HttpServletRequest req, HttpServletResponse resp)
//		      throws IOException {
//		UserService userService = UserServiceFactory.getUserService();
//	    User user = userService.getCurrentUser();
//		    
//
//		    String guestbookName = req.getParameter("guestbookName");
//		    Key guestbookKey = KeyFactory.createKey("Guestbook", guestbookName);
//		    String content = req.getParameter("content");
//		    Date date = new Date();
//		    Entity greeting = new Entity("Greeting", guestbookKey);
//		    if (user != null) {
//		      greeting.setProperty("author_id", user.getUserId());
//		      greeting.setProperty("author_email", user.getEmail());
//		    }
//		    greeting.setProperty("date", date);
//		    greeting.setProperty("content", content);
//
//		    DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();
//		    datastore.put(greeting);
//
//		    resp.sendRedirect("/guestbook.jsp?guestbookName=" + guestbookName);
//		  }

}
